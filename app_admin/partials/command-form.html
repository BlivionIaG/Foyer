
<h1>Commande <small>/ <span ng-if="action == 'add'">Ajouter</span><span ng-if="action == 'edit'">Édition da la Commande &laquo; {{ command.id_commande }} &raquo;</span></small></h1>
<hr />

<div class="alert alert-warning alert-dismissible" role="alert" ng-show="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong>{{ alert }}
</div>

<div class="alert alert-danger" role="alert" ng-show="form.periode_fin.$error.pattern || form.periode_debut.$error.pattern">Les périodes doivent être sous la forme XXhXX.</div>


<form role="form" name="form" class="form-horizontal" ng-submit="submitForm()">
  <span ng-if="action == 'edit'">
    <div class="form-group">
      <label>ID</label>
      <input type="text" class="form-control" placeholder="ID" ng-model="command.id_commande" ng-disabled="action == 'edit'">
    </div>
  </span>
  <div class="form-group">
    <label>Login</label>
    <select class="form-control ng-pristine ng-valid" ng-model="command.login" ng-options="user.login as user.login for user in users" ng-selected="command.login" required></select>
  </div>
  <div class="form-group">
    <label>Période de début</label>
    <input name="periode_debut" type="text" class="form-control" placeholder="Période Début" ng-model="command.periode_debut" ng-pattern="/^([0-9]|0[0-9]|1[0-9]|2[0-3])h[0-5][0-9]$/" required>
  </div>
  <div class="form-group">
    <label>Période de fin</label>
    <input name="periode_fin" type="text" class="form-control" placeholder="Période Fin" ng-model="command.periode_fin" ng-pattern="/^([0-9]|0[0-9]|1[0-9]|2[0-3])h[0-5][0-9]$/" required>
  </div>
  <div class="form-group">
    <label>Etat de la commande</label>
    <input type="radio" ng-model="command.state" ng-value="1" ng-checked="true"/>En cours de validation
    <input type="radio" ng-model="command.state" ng-value="2" ng-checked="command.state == 2"/>Validé
    <input type="radio" ng-model="command.state" ng-value="3" ng-checked="command.state == 3"/>Servie
  </div>
  <div class="pull-right">
    <a href="#command" class="btn btn-default" ng-confirm-click="Êtes-vous sûr de vouloir annuler ?">Annuler</a>
    <a ng-if="action == 'edit'" class="btn btn-danger" ng-click="delete()" ng-confirm-click="Êtes-vous sûr de vouloir supprimer ?">Supprimer</a>
    <a class="btn btn-danger" ng-if="action == 'add'" ng-click="reinitialiser()" ng-confirm-click="Êtes-vous sûr de vouloir tout effacer ?">Ré-initialiser</a>
    <input type="submit" value="Valider" class="btn btn-primary" ng-disabled="form.periode_fin.$error.pattern || form.periode_debut.$error.pattern || command.login === ''"/>
  </div>
</form>